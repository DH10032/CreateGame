{
  "story_title": "잃어버린 기억",
  "story_description": "주인공은 숲에서 깨어나지만 자신이 누구인지 기억하지 못한다. 손에는 피가 묻어 있고, 주머니에는 낡은 목걸이만 있다.",
  
  "main_story": {
    "title": "잃어버린 기억",
    "goal": "잃어버린 기억을 되찾고, 자신의 정체를 밝힌다",
    "total_acts": 5,
    "checkpoints": [
      {
        "id": "forest_escape",
        "order": 1,
        "title": "숲 탈출",
        "description": "낯선 숲을 빠져나와 마을에 도착한다",
        "required": true
      },
      {
        "id": "find_necklace_owner",
        "order": 2,
        "title": "목걸이의 주인",
        "description": "목걸이의 주인을 찾아 과거의 단서를 얻는다",
        "required": true
      },
      {
        "id": "meet_old_companion",
        "order": 3,
        "title": "과거의 동료",
        "description": "과거의 동료를 만나 진실에 한 발짝 다가간다",
        "required": true
      },
      {
        "id": "discover_truth",
        "order": 4,
        "title": "진실 발견",
        "description": "기억 상실의 진실과 자신의 과거를 알게 된다",
        "required": true
      },
      {
        "id": "final_choice",
        "order": 5,
        "title": "최종 선택",
        "description": "과거를 받아들이거나 새로운 삶을 선택한다",
        "required": true
      }
    ]
  },
  
  "personal_story": {
    "title": "사라진 검사",
    "background": "플레이어는 과거에 왕국의 정예 검사였다. 하지만 어떤 사건으로 인해 기억을 잃었다.",
    "checkpoints": [
      {
        "id": "muscle_memory",
        "title": "근육의 기억",
        "description": "검을 잡으면 몸이 저절로 움직인다",
        "trigger_condition": "첫 전투 발생 시"
      },
      {
        "id": "dream_fragments",
        "title": "꿈의 파편",
        "description": "꿈에서 단편적인 과거의 장면들이 나타난다",
        "trigger_condition": "3회 이상 휴식 시"
      },
      {
        "id": "recognized",
        "title": "재회",
        "description": "옛 동료들이 당신을 알아본다",
        "trigger_condition": "main_story.meet_old_companion 도달"
      },
      {
        "id": "betrayal_truth",
        "title": "배신의 진실",
        "description": "당신은 배신자로 낙인찍혔고, 스스로 기억을 지웠다",
        "trigger_condition": "main_story.discover_truth 도달"
      }
    ],
    "links_to_main": [
      "meet_old_companion",
      "discover_truth"
    ]
  },
  
  "mini_stories": [
    {
      "id": "herbalist_request",
      "title": "약초 할머니의 부탁",
      "description": "마을 입구의 약초 할머니가 숲에서 희귀 약초를 구해달라고 부탁한다",
      "location": "마을 입구",
      "required_checkpoint": "forest_escape",
      "progression": [
        {
          "step": 1,
          "description": "할머니와 대화",
          "dialogue": "젊은이, 부탁이 있소. 숲 깊은 곳에 자라는 푸른 달풀을 구해줄 수 있겠소?"
        },
        {
          "step": 2,
          "description": "숲으로 이동",
          "event": "약초 발견"
        },
        {
          "step": 3,
          "description": "선택의 순간",
          "choices": [
            {
              "id": "help_boy",
              "text": "늑대에게 쫓기는 소년을 구한다",
              "consequences": {
                "narrative_points": {
                  "bonds_formed": 1,
                  "heroic_deeds": 2
                },
                "rewards": {
                  "약초": 1,
                  "소년의 감사": true
                },
                "future_events": ["boy_returns_favor"]
              }
            },
            {
              "id": "take_all",
              "text": "소년을 외면하고 약초를 혼자 가져간다",
              "consequences": {
                "narrative_points": {
                  "dark_choices": 1
                },
                "rewards": {
                  "약초": 2,
                  "금화": 100
                },
                "future_events": ["guilt_accumulation"]
              }
            }
          ]
        }
      ],
      "impact_on_main": "bonds_formed이 높으면 main_story 진행 시 동료의 도움을 받을 수 있음",
      "impact_on_personal": "첫 전투 발생으로 근육 기억 이벤트 트리거"
    },
    
    {
      "id": "black_market_informant",
      "title": "암시장의 정보상",
      "description": "마을 뒷골목 암시장에서 수상한 정보상이 당신에게 접근한다",
      "location": "마을 뒷골목",
      "required_checkpoint": "forest_escape",
      "progression": [
        {
          "step": 1,
          "description": "암시장 탐색 중 정보상이 접근",
          "dialogue": "당신... 찾는 사람이 있지 않소? 내가 도울 수 있소."
        },
        {
          "step": 2,
          "description": "선택의 순간",
          "choices": [
            {
              "id": "make_deal",
              "text": "거래한다 (300골드)",
              "consequences": {
                "narrative_points": {},
                "rewards": {
                  "정보": "목걸이는 왕실 근위대의 표식이다",
                  "단서": "북쪽 성에 가면 답을 얻을 수 있다"
                },
                "debts": {
                  "정보상": 300
                },
                "unlocks": ["main_story.find_necklace_owner의 진행 가속"],
                "future_events": ["informant_calls_favor"]
              }
            },
            {
              "id": "refuse",
              "text": "거절한다",
              "consequences": {
                "narrative_points": {},
                "rewards": {},
                "future_events": ["informant_becomes_hostile"]
              }
            }
          ]
        }
      ],
      "impact_on_main": "거래 시 find_necklace_owner 체크포인트 단서 획득",
      "hidden_info": "정보상의 정체: 과거 당신의 정보원이었음"
    },
    
    {
      "id": "bandit_attack",
      "title": "도적단 습격",
      "description": "마을 근처에서 도적단이 상인을 습격하는 장면을 목격한다",
      "location": "마을 근처 도로",
      "required_checkpoint": "forest_escape",
      "progression": [
        {
          "step": 1,
          "description": "상인이 도적들에게 습격당하는 장면 목격",
          "dialogue_npc": "살려주시오! 제발!"
        },
        {
          "step": 2,
          "description": "선택의 순간",
          "choices": [
            {
              "id": "save_merchant",
              "text": "상인을 구한다",
              "requires": {
                "combat": true,
                "enemies": [
                  {"name": "도적", "count": 3, "hp": 20, "attack": 8}
                ]
              },
              "consequences": {
                "narrative_points": {
                  "heroic_deeds": 3,
                  "bonds_formed": 1
                },
                "rewards": {
                  "금화": 200,
                  "상인의 추천서": true
                },
                "personal_story_trigger": "muscle_memory",
                "dialogue": "이상하다... 내 몸이 저절로 움직여. 나... 검을 다룰 줄 알았던 건가?"
              }
            },
            {
              "id": "ignore",
              "text": "외면하고 지나간다",
              "consequences": {
                "narrative_points": {
                  "dark_choices": 1
                },
                "status_effects": {
                  "죄책감": 1
                },
                "future_events": ["merchant_dies", "guilt_accumulation"]
              }
            },
            {
              "id": "deal_with_bandits",
              "text": "도적들과 거래한다",
              "consequences": {
                "narrative_points": {
                  "dark_choices": 2
                },
                "rewards": {
                  "도적의 지도": true,
                  "훔친 물건": "다양한 아이템"
                },
                "future_events": ["bandit_alliance"]
              }
            }
          ]
        },
        {
          "step": 3,
          "description": "전투 후 이벤트 (save_merchant 선택 시)",
          "special_event": {
            "trigger": "전투 승리",
            "npc_reaction": "도적 두목: '이 검술... 설마 네놈이 그 배신자...!'",
            "revelation": "도적 두목이 당신의 검술을 알아본다",
            "personal_story_advancement": true
          }
        }
      ],
      "impact_on_main": "전투 선택 시 과거 단서 획득",
      "impact_on_personal": "muscle_memory 이벤트 트리거, 나는 누구인가 의문 시작"
    }
  ],
  
  "narrative_connections": {
    "description": "미니 스토리가 메인/개인 스토리에 영향을 주는 연결 구조",
    "connections": [
      {
        "from": "mini_stories.herbalist_request",
        "to": "personal_story.muscle_memory",
        "condition": "help_boy 선택 시 전투 발생",
        "effect": "검술 각성 이벤트"
      },
      {
        "from": "mini_stories.herbalist_request",
        "to": "main_story.meet_old_companion",
        "condition": "bonds_formed >= 5",
        "effect": "동료가 우호적으로 접근"
      },
      {
        "from": "mini_stories.black_market_informant",
        "to": "main_story.find_necklace_owner",
        "condition": "make_deal 선택",
        "effect": "단서 획득으로 진행 가속"
      },
      {
        "from": "mini_stories.bandit_attack",
        "to": "personal_story.muscle_memory",
        "condition": "save_merchant 선택",
        "effect": "검술 발견"
      },
      {
        "from": "mini_stories.bandit_attack",
        "to": "personal_story.recognized",
        "condition": "도적 두목과 대화",
        "effect": "과거 단서 획득"
      },
      {
        "from": "personal_story.muscle_memory",
        "to": "main_story.discover_truth",
        "condition": "personal_story 체크포인트 3개 이상",
        "effect": "진실 발견 이벤트 준비"
      }
    ]
  },
  
  "endings": {
    "description": "서사 포인트에 따른 엔딩 분기",
    "possible_endings": [
      {
        "id": "hero_ending",
        "title": "영웅의 귀환",
        "requirements": {
          "heroic_deeds": 15,
          "bonds_formed": 10,
          "main_story_complete": true
        },
        "description": "과거를 용서받고 왕국으로 복귀한다. 새로운 기사단을 창설하여 정의를 실현한다.",
        "final_scene": "왕 앞에 무릎 꿇은 당신에게 검이 수여된다. '다시 한번 왕국을 지켜다오.'"
      },
      {
        "id": "revenge_ending",
        "title": "복수의 화신",
        "requirements": {
          "dark_choices": 12,
          "main_story_complete": true
        },
        "description": "자신을 배신한 자들에게 복수한다. 어둠의 세력에 가담하여 왕국을 뒤엎는다.",
        "final_scene": "불타는 성을 바라보며 당신은 차갑게 웃는다. '이제 시작이다.'"
      },
      {
        "id": "wanderer_ending",
        "title": "방랑자의 길",
        "requirements": {
          "heroic_deeds": 5,
          "dark_choices": 5,
          "bonds_formed": 5,
          "main_story_complete": true
        },
        "description": "과거를 묻고 새로운 삶을 선택한다. 마을의 수호자로 정착한다.",
        "final_scene": "마을 사람들이 당신을 환영한다. 과거는 중요하지 않다. 지금의 당신이 중요하다."
      },
      {
        "id": "truth_hidden_ending",
        "title": "침묵의 선택",
        "requirements": {
          "main_story_complete": true,
          "special_choice": "진실을 알았지만 모른 척"
        },
        "description": "진실을 알았지만 모른 척하고 평범한 모험가로 살아간다.",
        "final_scene": "목걸이를 강물에 던진다. 어떤 진실은 모르는 게 나을 때도 있다."
      }
    ]
  },
  
  "initial_state": {
    "player": {
      "name": "???",
      "location": "낯선 숲",
      "inventory": ["낡은 목걸이"],
      "status": "기억상실"
    },
    "narrative_points": {
      "heroic_deeds": 0,
      "dark_choices": 0,
      "magical_affinity": 0,
      "bonds_formed": 0
    },
    "progress": {
      "main_story_checkpoints": [],
      "personal_story_checkpoints": [],
      "mini_stories_completed": []
    }
  }
}